<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Forest Guardian</title>
    <link rel="stylesheet" href="maptest.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@0.7.7/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@0.7.7/dist/leaflet.js"></script>
    <script type="text/javascript" src="leaflet.ajax.js"></script>
</head>
<body>
    <div id="windyty"></div>
    <script type="text/javascript">
      var windytyInit = {
        // Required: API key
        key: 'pBEnvSWfnXaWpNC',

        // Optional: Initial state of the map
        lat: 9.934739,
        lon: -84.087502,
        zoom: 8,
      }

      var mapView;

      function windytyMain(map) {
        mapView = map;
        map.options.maxZoom = 11;

        var fireIcon = L.icon({
            iconUrl: 'fire.png',
            iconSize:     [32, 37],
            iconAnchor:   [16, 36]
        });

        var geojsonLayer = new L.GeoJSON.AJAX("http://forestdev6339.cloudapp.net/Leaflet/central_america.json", {
          middleware:function(data){
            return L.geoJson(data, {
              onEachFeature: function (feature, layer) {
                layer.setIcon(fireIcon);
              }
            }).addTo(map);
          }
        });
        geojsonLayer.addTo(map);
      }

      function setUserCurrentLocation(latitude, longitude) {
        console.log("lat = " + latitude + ", long = " + longitude);
        mapView.setView(L.latLng(latitude, longitude), 8);
      }
    </script>
    <script async defer src="https://api.windytv.com/v2.3/boot.js"></script>
</body>
</html>
